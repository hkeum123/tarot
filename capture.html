<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>결과 확인하기</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h2>위로 카드가 선택되었습니다!</h2>
        <p>결과를 확인하려면 이메일을 입력해주세요.</p>
        
        <form id="emailForm" action="https://getform.io/f/ayverqpb" method="POST">
            <label for="email">이메일 주소:</label>
            <input type="email" id="email" name="email" required>
            
            <input type="hidden" id="redirectUrl" name="_next">
            
            <button type="submit">결과 보기</button>
        </form>
    </div>

    <script>
        // 페이지가 로드될 때 실행됩니다.
        window.onload = function() {
            
            // --- [ 1. 여기를 꼭 수정하세요! ] ---
            // GitHub Pages 배포가 완료된 "기본 주소"를 여기에 입력합니다.
            // (주의: 맨 마지막에 / (슬래시)는 빼고 입력하세요)
            const baseUrl = "https://hkeum123.github.io/tarot/";
            // 예시: const baseUrl = "https://coding-partner.github.io/tarot-mvp";
            // ---------------------------------


            // URL에서 'card' 파라미터 값(랜덤으로 뽑힌 값)을 가져옵니다.
            const urlParams = new URLSearchParams(window.location.search);
            const cardResultPage = urlParams.get('card');

            // '절대 경로'(Full URL)를 저장할 변수를 만듭니다.
            let finalRedirectUrl;
            
            if (cardResultPage) {
                // baseUrl과 랜덤 파일 이름을 합쳐 완전한 주소를 만듭니다.
                // 예: "https://.../tarot-mvp/result_02.html"
                finalRedirectUrl = `${baseUrl}/${cardResultPage}`;
            } else {
                // 예외 처리 (카드를 안 뽑고 접근 시 메인으로)
                finalRedirectUrl = `${baseUrl}/index.html`;
            }

            // 숨겨진 'next' 필드에 이 '랜덤 절대 경로'를 값으로 설정합니다.
            document.getElementById('redirectUrl').value = finalRedirectUrl;
        };
    </script>
</body>
</html>